# –ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É –¢–≠–ú-104

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏
```python
from test104 import TEM104_Serial_Client

client = TEM104_Serial_Client(port='COM3', baudrate=9600, address=1)
client.connect()
protocol = client.auto_detect_protocol()
print(f"–ü—Ä–æ—Ç–æ–∫–æ–ª: {protocol}")
client.disconnect()
```

### 2. –ß—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
```python
data = client.read_all_data()
print(f"Q: {data.get('Q', 0):.3f} –ì–∫–∞–ª")
print(f"T1: {data.get('T1', 0):.1f}¬∞C")
print(f"T2: {data.get('T2', 0):.1f}¬∞C")
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞

### –ó–∞–ø—Ä–æ—Å
```
55 [ADDR] [!ADDR] [CGRP] [CMD] [LEN] [DATA...] [CS]
```

### –û—Ç–≤–µ—Ç  
```
AA [ADDR] [!ADDR] [CGRP] [CMD] [LEN] [DATA...] [CS]
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ì—Ä—É–ø–ø–∞ | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –î–∞–Ω–Ω—ã–µ |
|--------|---------|----------|--------|
| 0x00 | 0x00 | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ù–µ—Ç |
| 0x0F | 0x01 | –ß—Ç–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ | [ADDR_H][ADDR_L][LEN] |
| 0x0F | 0x02 | –ß—Ç–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ | [ADDR_H][ADDR_L][LEN] |
| 0x0C | 0x01 | –ß—Ç–µ–Ω–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö | [ADDR_H][ADDR_L][LEN] |

## üìç –ê–¥—Ä–µ—Å–∞ –ø–∞–º—è—Ç–∏

### ARVAS_M1 (TEM-104M-1)
- **–ò—Ç–æ–≥–∏**: 0x0180
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ**: 0x4000  
- **–í—Ä–µ–º—è**: 0x0000 (–¥–µ—Å—è—Ç–∏—á–Ω—ã–π)

### ARVAS_LEGACY (TEM-104)
- **–ò—Ç–æ–≥–∏**: 0x0200
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ**: 0x2200
- **–í—Ä–µ–º—è**: 0x0010 (BCD)

## üßÆ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞

```python
def checksum(packet):
    return (~sum(packet) & 0xFF)
```

**–ü—Ä–∏–º–µ—Ä:**
- –ü–∞–∫–µ—Ç: `55 01 FE 00 00 00`
- –°—É–º–º–∞: `0x154` ‚Üí –º–ª–∞–¥—à–∏–π –±–∞–π—Ç `0x54` ‚Üí –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `0xAB`

## üìä –°–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### ARVAS_M1 (–∏—Ç–æ–≥–∏ 0x0180)
- `0x08-0x0B`: V1 (float)
- `0x0C-0x0F`: M1 (float)
- `0x10-0x13`: Q (float)
- `0x18-0x1B`: V1 (long)
- `0x1C-0x1F`: M1 (long)
- `0x20-0x23`: Q (long)
- `0x30-0x33`: T_nar (long)

### ARVAS_M1 (–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ 0x4000)
- `0x00-0x03`: T1 (float)
- `0x04-0x07`: T2 (float)
- `0x20-0x23`: G1 (float)
- `0x24-0x27`: G2 (float)

## üîç –ü—Ä–∏–º–µ—Ä—ã –ø–∞–∫–µ—Ç–æ–≤

### –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
**–ó–∞–ø—Ä–æ—Å:** `55 01 FE 00 00 00 AB`
**–û—Ç–≤–µ—Ç:** `AA 01 FE 00 00 08 54 45 4D 2D 31 30 34 XX`

### –ß—Ç–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ (ARVAS_M1)
**–ó–∞–ø—Ä–æ—Å:** `55 01 FE 0F 01 03 01 80 FF XX`
**–û—Ç–≤–µ—Ç:** `AA 01 FE 0F 01 FF [255 –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö] XX`

### –ß—Ç–µ–Ω–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö (ARVAS_M1)
**–ó–∞–ø—Ä–æ—Å:** `55 01 FE 0C 01 03 40 00 FF XX`
**–û—Ç–≤–µ—Ç:** `AA 01 FE 0C 01 FF [255 –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö] XX`

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏
```python
def check_connection(port, baudrate, address):
    try:
        client = TEM104_Serial_Client(port=port, baudrate=baudrate, address=address)
        client.connect()
        protocol = client.auto_detect_protocol()
        client.disconnect()
        return protocol is not None
    except:
        return False
```

### –ß—Ç–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
```python
def read_temperature(port, baudrate, address):
    client = TEM104_Serial_Client(port=port, baudrate=baudrate, address=address)
    client.connect()
    data = client.read_all_data()
    client.disconnect()
    return data.get('T1', 0), data.get('T2', 0)
```

### –ú–∞—Å—Å–æ–≤—ã–π –æ–ø—Ä–æ—Å
```python
def mass_poll(devices):
    results = []
    for device in devices:
        try:
            client = TEM104_TCP_Client(host=device['ip'], port=5009, address=1)
            client.connect()
            data = client.read_all_data()
            results.append({'name': device['name'], 'data': data})
            client.disconnect()
        except:
            results.append({'name': device['name'], 'error': 'Connection failed'})
    return results
```

## üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
1. **–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥—Ä–µ—Å, —Å–∫–æ—Ä–æ—Å—Ç—å, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
2. **–ù–µ–≤–µ—Ä–Ω–∞—è CS** ‚Üí –ü–æ–º–µ—Ö–∏ –≤ –ª–∏–Ω–∏–∏
3. **–ù–µ–≤–µ—Ä–Ω—ã–π SIG** ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, —Å–±—Ä–æ—Å–∏—Ç—å –±—É—Ñ–µ—Ä
4. **–ù–µ–≤–µ—Ä–Ω–∞—è –¥–ª–∏–Ω–∞** ‚Üí –û–±—Ä—ã–≤ —Å–≤—è–∑–∏, —É–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –¢–∞–π–º–∞—É—Ç: 2-5 —Å–µ–∫—É–Ω–¥
- –ü–æ–≤—Ç–æ—Ä—ã: –¥–æ 3 —Ä–∞–∑ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–∞—É–∑—ã: 100-500 –º—Å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–ø—Ä–æ—Å–∞
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã

### –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –°–µ–ª–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –î–µ–ª—å—Ç–∞-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –æ–ø—Ä–æ—Å–∞

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: `–¢–≠–ú-104_–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.md`
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ**: `–ü—Ä–æ—Ç–æ–∫–æ–ª_–¢–≠–ú-104_–î–µ—Ç–∞–ª—å–Ω–æ.md`
- **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã**: `–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ_–ø—Ä–∏–º–µ—Ä—ã_–¢–≠–ú-104.py`
- **–û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞**: `test104.py`
- **GUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `tem104_gui.py`

## üí° –°–æ–≤–µ—Ç—ã

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è –º–æ–¥–µ–ª–∏**
3. **–î–µ–ª–∞–π—Ç–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏**
4. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è**
5. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**

---

*–≠—Ç–æ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º—É—é –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–∑—É—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.* 